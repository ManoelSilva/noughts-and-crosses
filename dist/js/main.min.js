!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);class r{constructor(){this.text={getInitialModalTitle:"Iniciar jogo",getInitialPhrase:"Selecione o primeiro jogador",getHumanText:"Homem",getMachineText:"Máquina",getInitialModalBody:e=>this.getInitialModalBody(e)}}getInitialModalBody(e){return'<div class="col-md-12 text-center">'+e.getInitialPhrase+'<br> <button type="button" class="btn btn-warning human">'+e.getHumanText+'</button><button type="button" class="btn btn-info machine">'+e.getMachineText+"</button></div>"}}class n{constructor(){this.globals={human:-1,machine:1}}getAiMove(e){let t,a=this,r=e.state;if(9==r.getCurrentEmptyCells().length){let n=parseInt(3*Math.random()),l=parseInt(3*Math.random());if(!a.validateMove(n,l,r.currentState))return a.getAiMove(e);t=[n,l]}else if(t=this.minMax(e,r.currentState,r.getCurrentEmptyCells().length,this.globals[e.player]),!a.validateMove(t[0],t[1],r.currentState))return a.getAiMove(e);return t}validateMove(e,t,a){try{return 0==a[e][t]}catch(e){return!1}}gameOver(e,t){let a=this,r=[[e[0][0],e[0][1],e[0][2]],[e[1][0],e[1][1],e[1][2]],[e[2][0],e[2][1],e[2][2]],[e[0][0],e[1][0],e[2][0]],[e[0][1],e[1][1],e[2][1]],[e[0][2],e[1][2],e[2][2]],[e[0][0],e[1][1],e[2][2]],[e[2][0],e[1][1],e[0][2]]];for(let e=0;e<8;e++){let n=r[e],l=0;for(let e=0;e<3;e++)n[e]==a.globals[t]&&l++;if(3==l)return!0}return!1}draw(e){return this.gameOver(e,"human")||this.gameOver(e,"machine")}minMax(e,t,a,r){let n,l=this;if(n=r==l.globals.machine?[-1,-1,-1e3]:[-1,1,1e3],0==a||l.draw(t)){let e=l.smarthAgent(t);return console.log("score",e),[-1,-1,e]}return e.state.getCurrentEmptyCells().forEach(i=>{let o=i[0],s=i[1];t[o][s]=r;let u=l.minMax(e,t,a-1,-r);t[o][s]=0,u[0]=o,u[1]=s,r==l.globals.machine?u[2]>n[2]&&(n=u):u[2]<n[2]&&(n=u)}),console.log("getIAMove bestmove",n),n}smarthAgent(e){return this.gameOver(e,"machine")?1:this.gameOver(e,"human")?-1:0}}class l{constructor(e,t){this.helper=new o,this.ai=new n,this.state=t,this.player=e,this.classNames="cross nought blank"}startNewGame(){let e=this;if(this.helper.toggleModal(),this.helper.getCurrentTable().forEach(t=>{$(t).click(()=>{e.play($(t))})}),"machine"==e.player){let t=e.ai.getAiMove(e);return e.play($("#"+String(t[0])+String(t[1])))}}play(e){let t=this,a=t.state.currentState,r=0==t.ai.draw(a)&&t.state.getCurrentEmptyCells().length>0;if(1==r){let n,l=$(e).attr("id").split("")[0],i=$(e).attr("id").split("")[1];if(1==t.ai.validateMove(l,i,a)&&($(e).removeClass(this.classNames),$(e).addClass("machine"==t.player?"nought":"cross"),"human"==t.player?t.player="machine":t.player="human",t.state.currentState=t.helper.getCurrentTableAsState(),"machine"==t.player&&r))try{return n=t.ai.getAiMove(t),t.play($("#"+String(n[0])+String(n[1])))}catch(e){t.setGameOver(t.state.currentState,t.ai.globals.machine)}}0==t.state.getCurrentEmptyCells().length&&0==t.ai.draw(t.state.currentState)?(t.helper.configureModal("Fim do jogo!","Empate! F5 para recomeçar",!1),t.helper.toggleModal()):1!=t.ai.draw(t.state.currentState)&&0!=t.state.getCurrentEmptyCells().length||(t.helper.configureModal("Fim do jogo!","Derrota! F5 para recomeçar",!1),t.helper.toggleModal()),t.setGameOver(t.state.currentState,t.ai.globals.machine)}setGameOver(e,t){let a=this;if(a.ai.gameOver(e,t)){let t,n;if(1==e[0][0]&&1==e[0][1]&&1==e[0][2])t=[[0,0],[0,1],[0,2]];else if(1==e[1][0]&&1==e[1][1]&&1==e[1][2])t=[[1,0],[1,1],[1,2]];else if(1==bocurrentStateard[2][0]&&1==e[2][1]&&1==e[2][2])t=[[2,0],[2,1],[2,2]];else if(1==e[0][0]&&1==e[1][0]&&1==e[2][0])t=[[0,0],[1,0],[2,0]];else if(1==e[0][1]&&1==e[1][1]&&1==e[2][1])t=[[0,1],[1,1],[2,1]];else if(1==e[0][2]&&1==e[1][2]&&1==e[2][2])t=[[0,2],[1,2],[2,2]];else if(1==e[0][0]&&1==e[1][1]&&1==e[2][2])t=[[0,0],[1,1],[2,2]];else if(1==e[2][0]&&1==e[1][1]&&1==e[0][2]){t=[[2,0],[1,1],[0,2]];for(var r=0;r<t.length;r++)(n=$("#"+(String(t[r][0])+String(t[r][1])))).removeClass(this.classNames),n.addClass("nought");a.helper.configureModal("Fim do jogo!","Empate! F5 para recomeçar",!1),a.helper.toggleModal()}}}}class i{constructor(e){this.currentState=e}getCurrentEmptyCells(){for(var e=[],t=0;t<3;t++)for(var a=0;a<3;a++)0==this.currentState[t][a]&&e.push([t,a]);return e}}class o{constructor(e){this.gameConfig=e}getCurrentTable(){return Array.prototype.slice.call(document.getElementById("game-table").getElementsByTagName("li"))}getCurrentTableAsState(){let e=this;var t,a,r=[];for(t=0,a=-1;t<e.getCurrentTable().length;t++){let n=-1;t%3==0&&(r[++a]=[]),"blank"==$(e.getCurrentTable()[t]).attr("class")?n=0:"nought"==$(e.getCurrentTable()[t]).attr("class")&&(n=1),r[a].push(n)}return r}openInitialModal(){this.configureModal(this.gameConfig.text.getInitialModalTitle,this.gameConfig.text.getInitialModalBody(this.gameConfig.text),!1),$("#game-modal").modal({backdrop:"static",keyboard:!1})}toggleModal(){return $("#game-modal").modal("toggle"),!1}configureModal(e,t,a){$(".title").text(e),$(".body").html(t),a?$(".close").show():$(".close").hide()}applyStartFunctionModalButtons(){$(".human").on("click",()=>new l("human",new i(this.getCurrentTableAsState())).startNewGame()),$(".machine").on("click",async()=>new l("machine",new i(this.getCurrentTableAsState())).startNewGame())}}class s{constructor(){this.config=new r,this.helper=new o(this.config),this.game={}}async getInitialModal(){return this.helper.openInitialModal()}setStartGame(){this.helper.applyStartFunctionModalButtons()}}var u={};u=new s,$(window).on("load",function(){u.getInitialModal().then(()=>{u.setStartGame()})})}]);